<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korean Vocabulary Flashcards with SRS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #6b8cbc;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --light-bg: #f8f9fa;
            --dark-bg: #1a1a2e;
            --card-light: #ffffff;
            --card-dark: #16213e;
            --text-light: #333333;
            --text-dark: #e6e6e6;
            --border-radius: 12px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-bg);
            color: var(--text-light);
            line-height: 1.6;
            transition: var(--transition);
        }

        body.dark-mode {
            background-color: var(--dark-bg);
            color: var(--text-dark);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid #ddd;
        }

        body.dark-mode header {
            border-bottom-color: #444;
        }

        h1 {
            color: var(--primary-color);
            font-size: 2.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .toggle-btn {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        body.dark-mode .toggle-btn {
            color: var(--text-dark);
            border-color: var(--text-dark);
        }

        .toggle-btn:hover {
            background-color: rgba(74, 111, 165, 0.1);
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }

        body.dark-mode .progress-bar {
            background-color: #2d3748;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.5s ease;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .card {
            background-color: var(--card-light);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        body.dark-mode .card {
            background-color: var(--card-dark);
        }

        .word-display {
            text-align: center;
            margin-bottom: 20px;
        }

        .korean-word {
            font-size: 2.8rem;
            color: var(--primary-color);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .translation {
            font-size: 1.8rem;
            color: var(--secondary-color);
            margin-bottom: 5px;
        }

        .meaning-note {
            font-size: 1rem;
            color: #666;
            font-style: italic;
        }

        body.dark-mode .meaning-note {
            color: #aaa;
        }

        .example-sentence {
            font-size: 1.2rem;
            margin: 25px 0;
            padding: 15px;
            background-color: rgba(74, 111, 165, 0.1);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-color);
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 30px;
        }

        @media (min-width: 768px) {
            .quiz-options {
                grid-template-columns: 1fr 1fr;
            }
        }

        .option-btn {
            padding: 18px;
            text-align: left;
            background-color: rgba(74, 111, 165, 0.08);
            border: 2px solid transparent;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1.1rem;
            transition: var(--transition);
        }

        .option-btn:hover {
            background-color: rgba(74, 111, 165, 0.15);
            transform: translateY(-3px);
        }

        .option-btn.selected {
            border-color: var(--primary-color);
            background-color: rgba(74, 111, 165, 0.2);
        }

        .option-btn.correct {
            border-color: var(--success-color);
            background-color: rgba(76, 175, 80, 0.2);
        }

        .option-btn.incorrect {
            border-color: var(--danger-color);
            background-color: rgba(244, 67, 54, 0.1);
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: var(--border-radius);
            display: none;
        }

        .feedback.correct {
            background-color: rgba(76, 175, 80, 0.2);
            border-left: 4px solid var(--success-color);
            display: block;
        }

        .feedback.incorrect {
            background-color: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--danger-color);
            display: block;
        }

        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        .action-buttons .btn {
            flex: 1;
            justify-content: center;
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .hidden {
            display: none;
        }

        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background-color: rgba(74, 111, 165, 0.1);
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        body.dark-mode .stat-label {
            color: #aaa;
        }

        .word-list {
            margin-top: 30px;
        }

        .word-list table {
            width: 100%;
            border-collapse: collapse;
        }

        .word-list th, .word-list td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        body.dark-mode .word-list th, 
        body.dark-mode .word-list td {
            border-bottom: 1px solid #444;
        }

        .word-list th {
            background-color: rgba(74, 111, 165, 0.1);
            font-weight: 600;
        }

        .srs-level {
            display: inline-block;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .level-0 { background-color: #f44336; color: white; }
        .level-1 { background-color: #ff9800; color: white; }
        .level-2 { background-color: #ffeb3b; color: #333; }
        .level-3 { background-color: #8bc34a; color: white; }
        .level-4 { background-color: #4caf50; color: white; }
        .level-5 { background-color: #2196f3; color: white; }

        footer {
            margin-top: 40px;
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 0.9rem;
        }

        body.dark-mode footer {
            border-top-color: #444;
            color: #aaa;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .korean-word {
                font-size: 2.2rem;
            }
            
            .translation {
                font-size: 1.5rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .controls {
                flex-wrap: wrap;
                justify-content: flex-end;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-language"></i> Korean Vocabulary Flashcards</h1>
            <div class="controls">
                <button class="btn toggle-btn" id="themeToggle">
                    <i class="fas fa-moon"></i> Dark Mode
                </button>
                <button class="btn btn-primary" id="showWordList">
                    <i class="fas fa-list"></i> Word List
                </button>
            </div>
        </header>

        <div class="progress-container">
            <div class="progress-info">
                <span>Progress: <span id="progressText">0/15</span></span>
                <span>SRS Level: <span id="srsLevel">0</span></span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="main-content">
            <div class="card" id="quizCard">
                <div class="word-display">
                    <div class="korean-word" id="koreanWord">협동하다</div>
                    <div class="translation" id="translation">Cooperate</div>
                    <div class="meaning-note" id="meaningNote"></div>
                </div>

                <div class="example-sentence" id="exampleSentence">
                    우리는 이 프로젝트를 성공적으로 완수하기 위해 서로 협동해야 합니다.
                </div>

                <div class="quiz-options" id="quizOptions">
                    <!-- Options will be generated by JavaScript -->
                </div>

                <div class="feedback" id="feedback">
                    <p id="feedbackText"></p>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-success" id="showAnswer">
                        <i class="fas fa-lightbulb"></i> Show Answer
                    </button>
                    <button class="btn btn-primary hidden" id="nextWord">
                        <i class="fas fa-arrow-right"></i> Next Word
                    </button>
                    <button class="btn btn-warning" id="resetProgress">
                        <i class="fas fa-redo"></i> Reset Progress
                    </button>
                </div>
            </div>

            <div class="card hidden" id="statsCard">
                <h2><i class="fas fa-chart-bar"></i> Learning Statistics</h2>
                <div class="stats-panel">
                    <div class="stat-card">
                        <div class="stat-value" id="totalWords">15</div>
                        <div class="stat-label">Total Words</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="learnedWords">0</div>
                        <div class="stat-label">Words Learned</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="reviewWords">0</div>
                        <div class="stat-label">Due for Review</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="successRate">0%</div>
                        <div class="stat-label">Success Rate</div>
                    </div>
                </div>

                <div class="word-list">
                    <h3>Vocabulary List</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Korean</th>
                                <th>English</th>
                                <th>Example Sentence</th>
                                <th>SRS Level</th>
                            </tr>
                        </thead>
                        <tbody id="wordTableBody">
                            <!-- Word list will be generated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="backToQuiz">
                        <i class="fas fa-arrow-left"></i> Back to Quiz
                    </button>
                </div>
            </div>
        </div>

        <footer>
            <p>Designed with Spaced Repetition System (SRS) principles • Click "Show Answer" to reveal correct answer</p>
            <p>Words are scheduled for review based on your performance</p>
        </footer>
    </div>

    <script>
        // Vocabulary data
        const vocabulary = [
            {
                korean: "협동하다",
                translation: "Cooperate",
                meaningNote: "",
                example: "우리는 이 프로젝트를 성공적으로 완수하기 위해 서로 협동해야 합니다.",
                englishExample: "We need to cooperate with each other to successfully complete this project."
            },
            {
                korean: "판단하다",
                translation: "Judge",
                meaningNote: "(Justice)",
                example: "그는 상황을 신중하게 판단한 후 결정을 내렸다.",
                englishExample: "He made a decision after carefully judging the situation."
            },
            {
                korean: "더하다",
                translation: "Add",
                meaningNote: "",
                example: "수프에 약간의 소금을 더하세요.",
                englishExample: "Add a little salt to the soup."
            },
            {
                korean: "용기를 주다",
                translation: "Encourage",
                meaningNote: "(Add courage)",
                example: "선생님은 학생들에게 항상 용기를 주셨다.",
                englishExample: "The teacher always encouraged the students."
            },
            {
                korean: "바라다",
                translation: "Hope",
                meaningNote: "",
                example: "나는 네가 꿈을 이룰 수 있기를 바란다.",
                englishExample: "I hope you can achieve your dream."
            },
            {
                korean: "확인하다",
                translation: "Confirm",
                meaningNote: "",
                example: "비행 시간을 확인하기 위해 공항에 전화했다.",
                englishExample: "I called the airport to confirm the flight time."
            },
            {
                korean: "훼손하다",
                translation: "Damage",
                meaningNote: "",
                example: "그 그림은 시간이 지남에 따라 심하게 훼손되었다.",
                englishExample: "The painting was severely damaged over time."
            },
            {
                korean: "풍부하다",
                translation: "Abundant",
                meaningNote: "",
                example: "한국은 역사적으로 문화적 유산이 풍부한 나라입니다.",
                englishExample: "Korea is a country historically abundant in cultural heritage."
            },
            {
                korean: "창의력",
                translation: "Creativity",
                meaningNote: "",
                example: "그 작가는 놀라운 창의력으로 독자들을 매료시킨다.",
                englishExample: "The writer captivates readers with amazing creativity."
            },
            {
                korean: "감사하다",
                translation: "Thank",
                meaningNote: "",
                example: "도움을 주셔서 정말 감사합니다.",
                englishExample: "Thank you very much for your help."
            },
            {
                korean: "조정하다",
                translation: "Adjust",
                meaningNote: "(Modify)",
                example: "회의 일정을 다음 주로 조정해야 합니다.",
                englishExample: "We need to adjust the meeting schedule to next week."
            },
            {
                korean: "유의하다",
                translation: "Pay attention",
                meaningNote: "",
                example: "이 약을 복용할 때는 부작용에 유의해야 합니다.",
                englishExample: "You should pay attention to side effects when taking this medicine."
            },
            {
                korean: "공유하다",
                translation: "Share",
                meaningNote: "",
                example: "그는 회의 자료를 모든 팀원과 공유했다.",
                englishExample: "He shared the meeting materials with all team members."
            },
            {
                korean: "집중하다",
                translation: "Concentrate",
                meaningNote: "",
                example: "시험을 보는 동안에는 문제에 집중해야 합니다.",
                englishExample: "You need to concentrate on the questions during the exam."
            },
            {
                korean: "유명하다",
                translation: "Famous",
                meaningNote: "",
                example: "그 식당은 전국적으로 유명한 김치찌개로 알려져 있다.",
                englishExample: "The restaurant is known for its nationally famous kimchi stew."
            }
        ];

        // SRS System
        class SRSVocabulary {
            constructor(vocabulary) {
                this.vocabulary = vocabulary;
                this.loadProgress();
                this.currentIndex = 0;
                this.currentWord = this.getNextWord();
                this.isAnswerShown = false;
                this.quizOptions = [];
            }

            // Load progress from localStorage
            loadProgress() {
                const savedProgress = localStorage.getItem('koreanVocabSRS');
                if (savedProgress) {
                    const progress = JSON.parse(savedProgress);
                    this.vocabulary = this.vocabulary.map((word, index) => {
                        if (progress[index]) {
                            return { ...word, ...progress[index] };
                        }
                        return word;
                    });
                } else {
                    // Initialize SRS data
                    this.vocabulary = this.vocabulary.map(word => ({
                        ...word,
                        srsLevel: 0,
                        nextReview: Date.now(),
                        correctCount: 0,
                        wrongCount: 0,
                        lastReviewed: null
                    }));
                }
            }

            // Save progress to localStorage
            saveProgress() {
                const progress = this.vocabulary.map(word => ({
                    srsLevel: word.srsLevel,
                    nextReview: word.nextReview,
                    correctCount: word.correctCount,
                    wrongCount: word.wrongCount,
                    lastReviewed: word.lastReviewed
                }));
                localStorage.setItem('koreanVocabSRS', JSON.stringify(progress));
            }

            // Get next word for review (SRS algorithm)
            getNextWord() {
                const now = Date.now();
                const dueWords = this.vocabulary.filter(word => word.nextReview <= now);
                
                if (dueWords.length > 0) {
                    // Prioritize lower SRS levels
                    const sortedDueWords = dueWords.sort((a, b) => a.srsLevel - b.srsLevel);
                    const word = sortedDueWords[0];
                    this.currentIndex = this.vocabulary.findIndex(w => w.korean === word.korean);
                    return word;
                } else {
                    // All words are scheduled for future review, show the earliest one
                    const sortedWords = [...this.vocabulary].sort((a, b) => a.nextReview - b.nextReview);
                    const word = sortedWords[0];
                    this.currentIndex = this.vocabulary.findIndex(w => w.korean === word.korean);
                    return word;
                }
            }

            // Generate quiz options
            generateQuizOptions() {
                const correctWord = this.currentWord;
                const otherWords = this.vocabulary
                    .filter(word => word.korean !== correctWord.korean)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 3);
                
                const options = [correctWord, ...otherWords]
                    .sort(() => Math.random() - 0.5)
                    .map(word => word.translation);
                
                this.quizOptions = options;
                return options;
            }

            // Check answer
            checkAnswer(selectedTranslation) {
                const isCorrect = selectedTranslation === this.currentWord.translation;
                
                if (isCorrect) {
                    this.correctAnswer();
                } else {
                    this.wrongAnswer();
                }
                
                return isCorrect;
            }

            // Handle correct answer
            correctAnswer() {
                const word = this.currentWord;
                word.correctCount = (word.correctCount || 0) + 1;
                word.lastReviewed = Date.now();
                
                // Move to next SRS level
                const srsIntervals = [1, 6, 24, 72, 168]; // Hours until next review
                const newLevel = Math.min(word.srsLevel + 1, 5);
                word.srsLevel = newLevel;
                
                // Calculate next review time (in milliseconds)
                const hoursToNextReview = srsIntervals[newLevel - 1] || 168;
                word.nextReview = Date.now() + (hoursToNextReview * 60 * 60 * 1000);
                
                this.saveProgress();
            }

            // Handle wrong answer
            wrongAnswer() {
                const word = this.currentWord;
                word.wrongCount = (word.wrongCount || 0) + 1;
                word.lastReviewed = Date.now();
                
                // Reset SRS level to 0
                word.srsLevel = 0;
                word.nextReview = Date.now() + (60 * 60 * 1000); // 1 hour
                
                this.saveProgress();
            }

            // Get statistics
            getStats() {
                const totalWords = this.vocabulary.length;
                const learnedWords = this.vocabulary.filter(word => word.srsLevel >= 4).length;
                const reviewWords = this.vocabulary.filter(word => word.nextReview <= Date.now()).length;
                
                let totalCorrect = 0;
                let totalAttempts = 0;
                
                this.vocabulary.forEach(word => {
                    totalCorrect += word.correctCount || 0;
                    totalAttempts += (word.correctCount || 0) + (word.wrongCount || 0);
                });
                
                const successRate = totalAttempts > 0 ? Math.round((totalCorrect / totalAttempts) * 100) : 0;
                
                return {
                    totalWords,
                    learnedWords,
                    reviewWords,
                    successRate
                };
            }

            // Reset all progress
            resetProgress() {
                this.vocabulary = this.vocabulary.map(word => ({
                    ...word,
                    srsLevel: 0,
                    nextReview: Date.now(),
                    correctCount: 0,
                    wrongCount: 0,
                    lastReviewed: null
                }));
                
                this.saveProgress();
                this.currentWord = this.getNextWord();
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            const srsVocab = new SRSVocabulary(vocabulary);
            let selectedOption = null;
            
            // DOM Elements
            const themeToggle = document.getElementById('themeToggle');
            const showWordListBtn = document.getElementById('showWordList');
            const quizCard = document.getElementById('quizCard');
            const statsCard = document.getElementById('statsCard');
            const backToQuizBtn = document.getElementById('backToQuiz');
            const showAnswerBtn = document.getElementById('showAnswer');
            const nextWordBtn = document.getElementById('nextWord');
            const resetProgressBtn = document.getElementById('resetProgress');
            const progressText = document.getElementById('progressText');
            const srsLevel = document.getElementById('srsLevel');
            const progressFill = document.getElementById('progressFill');
            const koreanWord = document.getElementById('koreanWord');
            const translation = document.getElementById('translation');
            const meaningNote = document.getElementById('meaningNote');
            const exampleSentence = document.getElementById('exampleSentence');
            const quizOptions = document.getElementById('quizOptions');
            const feedback = document.getElementById('feedback');
            const feedbackText = document.getElementById('feedbackText');
            
            // Stats elements
            const totalWords = document.getElementById('totalWords');
            const learnedWords = document.getElementById('learnedWords');
            const reviewWords = document.getElementById('reviewWords');
            const successRate = document.getElementById('successRate');
            const wordTableBody = document.getElementById('wordTableBody');
            
            // Initialize display
            updateDisplay();
            
            // Dark mode toggle
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                const icon = this.querySelector('i');
                if (document.body.classList.contains('dark-mode')) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                    this.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
                } else {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                    this.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
                }
            });
            
            // Show word list
            showWordListBtn.addEventListener('click', function() {
                updateStats();
                quizCard.classList.add('hidden');
                statsCard.classList.remove('hidden');
            });
            
            // Back to quiz
            backToQuizBtn.addEventListener('click', function() {
                statsCard.classList.add('hidden');
                quizCard.classList.remove('hidden');
            });
            
            // Show answer button
            showAnswerBtn.addEventListener('click', function() {
                if (srsVocab.isAnswerShown) return;
                
                srsVocab.isAnswerShown = true;
                showAnswerBtn.classList.add('hidden');
                nextWordBtn.classList.remove('hidden');
                
                // Highlight correct answer
                const optionButtons = document.querySelectorAll('.option-btn');
                optionButtons.forEach(button => {
                    if (button.textContent === srsVocab.currentWord.translation) {
                        button.classList.add('correct');
                    }
                    button.disabled = true;
                });
                
                // Show feedback
                feedback.classList.add('correct');
                feedbackText.textContent = `Correct answer: ${srsVocab.currentWord.translation}. ${srsVocab.currentWord.englishExample}`;
            });
            
            // Next word button
            nextWordBtn.addEventListener('click', function() {
                srsVocab.currentWord = srsVocab.getNextWord();
                srsVocab.isAnswerShown = false;
                selectedOption = null;
                
                showAnswerBtn.classList.remove('hidden');
                nextWordBtn.classList.add('hidden');
                feedback.classList.remove('correct', 'incorrect');
                
                updateDisplay();
            });
            
            // Reset progress button
            resetProgressBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                    srsVocab.resetProgress();
                    updateDisplay();
                    updateStats();
                }
            });
            
            // Update display with current word
            function updateDisplay() {
                const word = srsVocab.currentWord;
                
                koreanWord.textContent = word.korean;
                translation.textContent = word.translation;
                meaningNote.textContent = word.meaningNote;
                exampleSentence.textContent = word.example;
                
                // Update SRS level display
                srsLevel.textContent = word.srsLevel;
                srsLevel.className = `srs-level level-${word.srsLevel}`;
                
                // Generate and display quiz options
                const options = srsVocab.generateQuizOptions();
                quizOptions.innerHTML = '';
                
                options.forEach(option => {
                    const button = document.createElement('button');
                    button.className = 'option-btn';
                    button.textContent = option;
                    
                    button.addEventListener('click', function() {
                        if (srsVocab.isAnswerShown) return;
                        
                        // Remove selected class from all options
                        document.querySelectorAll('.option-btn').forEach(btn => {
                            btn.classList.remove('selected');
                        });
                        
                        // Add selected class to clicked option
                        this.classList.add('selected');
                        selectedOption = option;
                        
                        // Check answer
                        const isCorrect = srsVocab.checkAnswer(option);
                        
                        // Show feedback
                        feedback.classList.remove('correct', 'incorrect');
                        feedback.classList.add(isCorrect ? 'correct' : 'incorrect');
                        
                        if (isCorrect) {
                            feedbackText.textContent = `Correct! ${word.englishExample}`;
                        } else {
                            feedbackText.textContent = `Incorrect. The correct answer is: ${word.translation}. ${word.englishExample}`;
                        }
                        
                        // Highlight correct and incorrect answers
                        const optionButtons = document.querySelectorAll('.option-btn');
                        optionButtons.forEach(btn => {
                            if (btn.textContent === word.translation) {
                                btn.classList.add('correct');
                            } else if (btn.textContent === option && !isCorrect) {
                                btn.classList.add('incorrect');
                            }
                            btn.disabled = true;
                        });
                        
                        // Show next word button
                        showAnswerBtn.classList.add('hidden');
                        nextWordBtn.classList.remove('hidden');
                        srsVocab.isAnswerShown = true;
                        
                        // Update progress
                        updateProgress();
                    });
                    
                    quizOptions.appendChild(button);
                });
                
                // Update progress display
                updateProgress();
            }
            
            // Update progress bar and text
            function updateProgress() {
                const stats = srsVocab.getStats();
                const progressPercent = Math.round((stats.learnedWords / stats.totalWords) * 100);
                
                progressText.textContent = `${stats.learnedWords}/${stats.totalWords}`;
                progressFill.style.width = `${progressPercent}%`;
            }
            
            // Update statistics display
            function updateStats() {
                const stats = srsVocab.getStats();
                
                totalWords.textContent = stats.totalWords;
                learnedWords.textContent = stats.learnedWords;
                reviewWords.textContent = stats.reviewWords;
                successRate.textContent = `${stats.successRate}%`;
                
                // Update word table
                wordTableBody.innerHTML = '';
                srsVocab.vocabulary.forEach(word => {
                    const row = document.createElement('tr');
                    
                    const koreanCell = document.createElement('td');
                    koreanCell.textContent = word.korean;
                    
                    const englishCell = document.createElement('td');
                    englishCell.textContent = word.translation;
                    
                    const exampleCell = document.createElement('td');
                    exampleCell.textContent = word.example;
                    
                    const srsCell = document.createElement('td');
                    const srsLevelBadge = document.createElement('span');
                    srsLevelBadge.className = `srs-level level-${word.srsLevel}`;
                    srsLevelBadge.textContent = word.srsLevel;
                    srsCell.appendChild(srsLevelBadge);
                    
                    row.appendChild(koreanCell);
                    row.appendChild(englishCell);
                    row.appendChild(exampleCell);
                    row.appendChild(srsCell);
                    
                    wordTableBody.appendChild(row);
                });
            }
            
            // Check for saved theme preference
            const savedTheme = localStorage.getItem('koreanVocabTheme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
            }
            
            // Save theme preference
            themeToggle.addEventListener('click', function() {
                const isDarkMode = document.body.classList.contains('dark-mode');
                localStorage.setItem('koreanVocabTheme', isDarkMode ? 'dark' : 'light');
            });
            
            // Initial stats update
            updateStats();
        });
    </script>
</body>
</html>